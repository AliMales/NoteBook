import{_ as s,j as a,k as n,S as l}from"./chunks/framework.2ff57350.js";const p=JSON.parse('{"title":"爬虫数据Mock","description":"","frontmatter":{},"headers":[],"relativePath":"tools/Mock.md","filePath":"tools/Mock.md"}'),o={name:"tools/Mock.md"},e=[l('<h1 id="爬虫数据mock" tabindex="-1">爬虫数据Mock <a class="header-anchor" href="#爬虫数据mock" aria-label="Permalink to &quot;爬虫数据Mock&quot;">​</a></h1><ul><li><p>随机生成中国境内地址（node）<a href="https://github.com/moonrailgun/chinese-address-generator" target="_blank" rel="noreferrer">chinese-address-generator</a></p></li><li><p>生成伪数据的库（python）<a href="https://github.com/joke2k/faker" target="_blank" rel="noreferrer">faker</a></p><p>它可以生成各种类型的随机数据，包括姓名、地址、电子邮件、电话号码、日期、时间和文本等。Faker可以用于测试、数据分析、学习和演示等多个场景。Faker还支持多语言的伪数据生成，包括英语、中文、日语、西班牙语等多种语言。</p></li><li><p>生成userAgent<a href="https://github.com/fake-useragent/fake-useragent" target="_blank" rel="noreferrer">fake_useragent</a></p></li></ul><h2 id="如何随机生成电话号码" tabindex="-1">如何随机生成电话号码？ <a class="header-anchor" href="#如何随机生成电话号码" aria-label="Permalink to &quot;如何随机生成电话号码？&quot;">​</a></h2><p>答：<a href="https://faker.readthedocs.io/en/master/" target="_blank" rel="noreferrer">faker</a>或许是最好的答案！</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> faker </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Faker</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># 初始化为中文数据</span></span>\n<span class="line"><span style="color:#A6ACCD;">fake </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Faker</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">locale</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zh_CN</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#A6ACCD;">phone_num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fake</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">phone_number</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 生成手机号</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">phone_num</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="如何随机生成user-agent" tabindex="-1">如何随机生成User-Agent？ <a class="header-anchor" href="#如何随机生成user-agent" aria-label="Permalink to &quot;如何随机生成User-Agent？&quot;">​</a></h2><p>答：<a href="https://pypi.org/project/fake-useragent/" target="_blank" rel="noreferrer">fake-useragent</a>提供生成userAgent功能，更多信息请参考文档</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> fake_useragent </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> UserAgent</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">ua </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserAgent</span><span style="color:#89DDFF;">()</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">ua</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">random</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="如何解析网站" tabindex="-1">如何解析网站？ <a class="header-anchor" href="#如何解析网站" aria-label="Permalink to &quot;如何解析网站？&quot;">​</a></h2><p>答：<a href="https://parsel.readthedocs.io/en/latest/usage.html" target="_blank" rel="noreferrer">parsel</a>像 Scrapy 的 Selector 一样，Parsel 的 <code>xpath()</code> 和 <code>css()</code> 方法都返回匹配的 SelectorList 对象，该对象是包含所有匹配结果的列表。如果要获取单个匹配结果，则可以使用 <code>get()</code> 方法。如果要获取所有匹配结果的字符串列表，则可以使用 <code>extract()</code> 方法。另外，Parsel 还支持将正则表达式与 Selector 对象中的文本进行匹配，可以使用 <code>re()</code> 方法。</p><p>需要注意的是，Parsel 相比于 Scrapy 的 Selector 更适用于大型的数据抓取和爬虫程序，由于它基于 lxml 库引擎，因此在速度和可扩展性方面，它会更加优秀。用法与 Scrapy 的 Selector 有所区别，但也具有一定的易用性。</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> parsel </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Selector</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">html </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;html&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;head&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">  &lt;title&gt;Example&lt;/title&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;/head&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;body&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">  &lt;div id=&quot;header&quot;&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">    &lt;h1&gt;Example.com&lt;/h1&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">  &lt;/div&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">  &lt;div id=&quot;content&quot;&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">    &lt;h2&gt;Introduction&lt;/h2&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">    &lt;p&gt;Hello World!&lt;/p&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">    &lt;a href=&quot;http://example.com&quot;&gt;More&lt;/a&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">  &lt;/div&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;/body&gt;</span></span>\n<span class="line"><span style="color:#C3E88D;">&lt;/html&gt;</span></span>\n<span class="line"><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 Parsel 对象加载 HTML 页面</span></span>\n<span class="line"><span style="color:#A6ACCD;">sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Selector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">text</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">html</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># 从 HTML 页面中选择所需数据</span></span>\n<span class="line"><span style="color:#A6ACCD;">title </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">xpath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">//title/text()</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 提取标题</span></span>\n<span class="line"><span style="color:#A6ACCD;">header </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">css</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#header h1::text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 提取标题</span></span>\n<span class="line"><span style="color:#A6ACCD;">paragraph </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">css</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#content p::text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 提取文本</span></span>\n<span class="line"><span style="color:#A6ACCD;">link </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">css</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#content a::attr(href)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 提取链接</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># 打印数据</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">title: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> title</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">header: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> header</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">paragraph: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> paragraph</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">link: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> link</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="如何下载图片" tabindex="-1">如何下载图片？ <a class="header-anchor" href="#如何下载图片" aria-label="Permalink to &quot;如何下载图片？&quot;">​</a></h2><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> httpx</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://www.example.com/image.jpg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 图片的URL地址</span></span>\n<span class="line"><span style="color:#A6ACCD;">filename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image.jpg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 保存的文件名</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;"> httpx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> url</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">filename</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wb</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> chunk </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">iter_bytes</span><span style="color:#89DDFF;">():</span></span>\n<span class="line"><span style="color:#A6ACCD;">            f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">chunk</span><span style="color:#89DDFF;">)</span></span></code></pre></div>',14)];const t=s(o,[["render",function(s,l,p,o,t,r){return a(),n("div",null,e)}]]);export{p as __pageData,t as default};
