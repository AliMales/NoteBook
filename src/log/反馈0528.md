

## 接口问题反馈

- 数表返回为null

```
curl 'http://localhost:1024/dev-api/dict/dict/tableTree?isManager=Y' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; __utmt=1; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmb=111872281.5.10.1653660133' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
  
```

```
{
  "code": 200,
  "msg": null,
  "data": null
}
```

- ## 匹配节点相关库表

```
curl 'http://localhost:1024/dev-api/dict/dict/matchingTreeId?treeId=24&pageNum=1&pageSize=10' \
  -X 'POST' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Length: 0' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmb=111872281.5.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/datadict?tab=search&id=24' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
```

```
{
  "msg": "StatementCallback; bad SQL grammar [SELECT COUNT(1)  FROM (SELECT mt.tree_id AS treeId, mt.table_name AS tableName, mt.table_name_cn AS tableNameCn, mt.desp AS desp \nFROM meta_table mt WHERE tree_id IN (SELECT `id` FROM meta_table_tree mtt \t\t\t\t\t\tWHERE is_available = 1 and mtt.is_delete = 0 and mtt.is_examine = 1 AND parent_id = 24)) as a]; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'mtt.is_examine' in 'where clause'",
  "code": 500
}
```

- # 匹配字段相关库表

```
curl 'http://localhost:1024/dev-api/dict/dict/matchingByColumnName?columnName=income_per_10t_unit&pageNum=1&pageSize=10' \
  -X 'POST' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Length: 0' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmb=111872281.5.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/?tab=search&id=income_per_10t_unit&type=matching' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
```

```
{
    "msg": "StatementCallback; bad SQL grammar [SELECT COUNT(1)  FROM (SELECT mt.tree_id AS treeId, mt.table_name AS tableName, mt.table_name_cn AS tableNameCn, mt.desp AS desp \nFROM meta_column_mysql mcm LEFT JOIN meta_table mt ON mcm.table_name = mt.table_name LEFT JOIN meta_table_tree mtt ON mt.tree_id = mtt.`id` WHERE mtt.is_available = 1 and mtt.is_delete = 0 and mtt.is_examine = 1 AND mcm.column_name = 'income_per_10t_unit') as a]; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'mtt.is_examine' in 'where clause'",
    "code": 500
}
```

- ## 保存非叶子节点信息

```
curl 'http://localhost:1024/dev-api/dict/dict/saveTreeNode' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Type: application/json;charset=UTF-8' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmt=1; __utmb=111872281.6.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --data-raw '{"parentCode":0,"sorted":6,"name":"test","isAvailable":1}' \
  --compressed
```

```
{
    "msg": "是否叶子节点不能为空",
    "code": 500
}
```

- ## 保存非叶子节点信息

```
curl 'http://localhost:1024/dev-api/dict/dict/saveTreeLeafNode' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Type: application/json;charset=UTF-8' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmt=1; __utmb=111872281.6.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --data-raw '{"parentCode":0,"sorted":6,"isAvailable":1,"metaTableQO":{"tableName":"bsc_base","tableNameCn":"xxx","desp":"xxx","updateFreq":"23","startYear":"2022","uniqueIndex":"xxx","questions":"xxx","tableType":"衍生数据表","dateSource":"dw-fund-fork"}}' \
  --compressed
```

```
{
    "msg": "父节点id不能为空",
    "code": 500
}
```

## 删除节点

```
curl 'http://localhost:1024/dev-api/dict/dict/batchUpdateTreeNodeDelete' \
  -X 'DELETE' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmt=1; __utmb=111872281.7.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
```

```
{
    "msg": "Request method 'DELETE' not supported",
    "code": 500
}
```

## 批量修改状态

```
curl 'http://localhost:1024/dev-api/dict/dict/batchUpdateTreeNodeAvailable?ids=244&isAvailable=0' \
  -X 'DELETE' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utmt=1; __utmb=111872281.7.10.1653660133' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
```

```
{
    "msg": "Request method 'DELETE' not supported",
    "code": 500
}
```

## 同步表格

```
curl 'http://localhost:1024/dev-api/dict/dict/syncTableColumn?code=3' \
  -X 'POST' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Length: 0' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; __utma=111872281.450634911.1652411278.1653615486.1653660133.29; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit?tab=detail&id=3' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --compressed
```

```
{
    "msg": "Required Long parameter 'treeId' is not present",
    "code": 500
}
```

## 排序接口

```
curl 'http://localhost:1024/dev-api/dict/dict/updateTreeLeafNodeSorted' \
  -H 'Accept: application/json, text/plain, */*' \
  -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,de;q=0.7' \
  -H 'Authorization: Bearer 343dde0b-3e00-431f-8a6b-16c6e436a4c3' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Type: application/json;charset=UTF-8' \
  -H 'Cookie: __utmz=111872281.1652411278.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=111872281; csrftoken=HU1x4a5z1vOxFRL8sWr8nGQ47wufnCzu4foh7yhZ1YUDlOV38E2zm7JO4XybK79C; sessionid=ezq5jpaotb1bl7ax78qb4xlwye9iw64v; username=admin; password=WMhNMPqY069w3XA+xCcF/bwOHtrMrAWWl36MghbW5IK0fHEdGvBfkoieeMii1sz7nKUSe+qfykp9R8ZU+v8f0g==; rememberMe=true; Admin-Token=343dde0b-3e00-431f-8a6b-16c6e436a4c3; Admin-Expires-In=172800; sidebarStatus=0; __utma=111872281.450634911.1652411278.1653660133.1653699591.30; __utmb=111872281.3.10.1653699591' \
  -H 'Origin: http://localhost:1024' \
  -H 'Referer: http://localhost:1024/funddatabrowse/dict-edit?tab=detail&id=3' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Site: same-origin' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36' \
  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="101", "Google Chrome";v="101"' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'sec-ch-ua-platform: "macOS"' \
  --data-raw '{"id":4,"parentId":2,"sorted":2}' \
  --compressed
```

```
{
    "code": 200,
    "msg": null,
    "data": false
}
```

